(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),l=n(9),u=n.n(l),o=n(6),i=n.n(o),s=n(11),m=n(25),d=n(18),f=n(170),p=n(155),v=function(e){var t=e.handleBlogAddition,n=Object(r.useState)(""),a=Object(d.a)(n,2),l=a[0],u=a[1],o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],m=i[1],v=Object(r.useState)(""),b=Object(d.a)(v,2),E=b[0],g=b[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:l,author:s,url:E}),m(""),u(""),g("")}},c.a.createElement(f.a,{required:!0,label:"Title",variant:"filled",size:"small",type:"text",value:l,id:"title",onChange:function(e){var t=e.target;return u(t.value)}})," ",c.a.createElement("br",null),c.a.createElement(f.a,{required:!0,label:"Author",variant:"filled",size:"small",type:"text",value:s,id:"author",onChange:function(e){var t=e.target;return m(t.value)}})," ",c.a.createElement("br",null),c.a.createElement(f.a,{required:!0,label:"URL",variant:"filled",size:"small",type:"text",value:E,id:"url",onChange:function(e){var t=e.target;return g(t.value)}})," ",c.a.createElement("br",null),c.a.createElement(p.a,{variant:"contained",type:"submit",color:"primary",style:{marginTop:15}},"Create"))},b=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),a=Object(d.a)(n,2),l=a[0],u=a[1],o={display:l?"none":""},i={display:l?"":"none"},s=function(){u(!l)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),c.a.createElement("div",null,c.a.createElement("div",{style:o},c.a.createElement(p.a,{variant:"contained",onClick:s},e.buttonLabel)),c.a.createElement("div",{style:i},e.children,c.a.createElement(p.a,{variant:"contained",color:"secondary",onClick:s},"Cancel")))})),E=n(80),g=n.n(E),h=n(154),y=n(156),O=n(157),w=n(158),j=n(24),k=function(e){var t=e.blogs,n=e.handleBlogAddition,a=e.blogFormRef;return c.a.createElement("div",null,c.a.createElement(b,{buttonLabel:"Create a new blog",ref:a},c.a.createElement(v,{handleBlogAddition:n})),c.a.createElement("h2",null,"Blogs"),c.a.createElement(h.a,null,t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return c.a.createElement(y.a,{dense:!0,key:e.id},c.a.createElement(O.a,null,c.a.createElement(g.a,null)),c.a.createElement(w.a,null,c.a.createElement(j.b,{to:"/blogs/".concat(e.id)},e.title," by ",e.author)))}))))},x=n(171),T=function(){var e=Object(m.c)((function(e){return e.notification}));return null===e?null:c.a.createElement("div",null,e.msg[1]?c.a.createElement(x.a,{severity:"success"},e.msg[0]):c.a.createElement(x.a,{severity:"error"},e.msg[0]))},A=function(e){var t=e.handleLogin,n=Object(r.useState)(""),a=Object(d.a)(n,2),l=a[0],u=a[1],o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],m=i[1];return c.a.createElement("div",null,c.a.createElement("h2",null,"Blog Portal"),c.a.createElement(b,{buttonLabel:"Magic Gate"},c.a.createElement("h4",null,"Log in to this awesome Application"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(l,s),u(""),m("")}},c.a.createElement("div",null,c.a.createElement(f.a,{label:"Username",variant:"filled",size:"small",type:"text",value:l,id:"username",name:"Username",onChange:function(e){var t=e.target;return u(t.value)}})),c.a.createElement("div",null,c.a.createElement(f.a,{label:"Password",variant:"filled",size:"small",type:"password",value:s,id:"password",name:"Password",onChange:function(e){var t=e.target;return m(t.value)}})),c.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))},I=n(159),C=n(85),L=n(160),N=n(161),S=n(162),B=n(163),R=n(164),D=function(e){var t=e.users;return c.a.createElement("div",null,c.a.createElement("h2",null,"Users"),c.a.createElement(I.a,{component:C.a},c.a.createElement(L.a,null,c.a.createElement(N.a,null,c.a.createElement(S.a,null,c.a.createElement(B.a,null,"User"),c.a.createElement(B.a,null,"Number of blogs"))),c.a.createElement(R.a,null,t.map((function(e){return c.a.createElement(S.a,{key:e.username},c.a.createElement(B.a,null,c.a.createElement(j.b,{to:"/users/".concat(e.id)},e.name)),c.a.createElement(B.a,null,e.blogs.length))}))))))},U=n(21),_=n(42),z=n(165),G=n(13),M=n(28),F=n.n(M),q="/api/blogs",J=null,P={getAll:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(q);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){J="bearer ".concat(e)},create:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:J}},e.next=3,F.a.post(q,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.put("".concat(q,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:J}},e.next=3,F.a.delete("".concat(q,"/").concat(t),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createComment:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.put("".concat(q,"/").concat(t.id,"/comments"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=function(e){return function(){var t=Object(s.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.create(e);case 2:a=t.sent,n({type:"CREATE_BLOG",data:{newBlog:a}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(e){return function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.remove(e);case 2:n({type:"DELETE_BLOG",data:{id:e}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(s.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.update(e);case 2:a=t.sent,n({type:"LIKE_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZATION":return t.data.blogs;case"CREATE_BLOG":return[].concat(Object(U.a)(e),[t.data.newBlog]);case"ADD_COMMENT":return e.map((function(e){return e.id!==t.data.id?e:Object(_.a)({},e,{comments:t.data.comments})}));case"DELETE_BLOG":return e.filter((function(e){return e.id!==t.data.id}));case"LIKE_BLOG":return e.map((function(e){return e.id===t.data.id?Object(_.a)({},e,{likes:t.data.likes}):e}));default:return e}},W=function(e){var t=e.blog,n=e.user,a=e.handleNotice,r=Object(G.f)(),l=Object(m.b)();if(!t)return null;var u=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete ".concat(t.title," by ").concat(t.author,"?"))){e.next=12;break}return e.prev=1,e.next=4,l(K(t.id));case 4:a("Deleted successfully.",!0),r.push("/blogs"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),a("Cannot delete!",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),o=function(e){var n;e.preventDefault(),l((n=Object(_.a)({},t,{comments:[].concat(Object(U.a)(t.comments),[e.target.comment.value])}),function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.createComment(n);case 2:a=e.sent,t({type:"ADD_COMMENT",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a("Your comment has been added!",!0),e.target.reset()},d=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(V(Object(_.a)({},t,{likes:t.likes+1})));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),a("No like added!",!1);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(z.a,{style:{padding:20}},c.a.createElement("h2",null,t.title," by ",t.author),"URL: ",c.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.url),c.a.createElement("br",null),"Likes: ",t.likes," ",c.a.createElement("br",null),"Added by ",t.user.name," ",c.a.createElement("br",null),c.a.createElement("h4",null,"Comments"),c.a.createElement("form",{onSubmit:function(e){return o(e)}},c.a.createElement(f.a,{required:!0,name:"comment",variant:"filled",size:"small",type:"text",label:"Comment"}),c.a.createElement(p.a,{variant:"contained",type:"submit",color:"primary"},"Add")),c.a.createElement("ul",null,t.comments&&t.comments.map((function(e){return c.a.createElement("li",{key:e},e)}))),c.a.createElement("div",{style:{marginTop:15}},c.a.createElement(p.a,{variant:"contained",size:"small",color:"primary",onClick:d},"Like"),n.username===t.user.username&&c.a.createElement(p.a,{variant:"contained",size:"small",color:"secondary",onClick:u},"Delete"))))},Y={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.data;default:return e}},X=function(e){return{type:"CREATE_USER",data:{user:e}}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER":return t.data.user;default:return e}},ee=n(166),te=n(167),ne=n(168),ae=n(169),re=n(51),ce=n(81),le=n.n(ce),ue=function(e){var t=e.user;return t?c.a.createElement("div",null,c.a.createElement("h2",null,"Author: ",t.name),c.a.createElement("h4",null,"Added Blogs"),c.a.createElement(h.a,null,t.blogs.map((function(e){return c.a.createElement(y.a,{dense:!0,key:e.id},c.a.createElement(O.a,null,c.a.createElement(le.a,null)),c.a.createElement(w.a,null," ",e.title," "))})))):null},oe={getAll:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data.users;default:return e}},se=n(82),me=n.n(se),de=function(){return c.a.createElement("div",null,c.a.createElement(me.a,null),c.a.createElement("div",null,"This blog was created with Node.js + Express and React + Redux. The data is persisted on MongoDB."),c.a.createElement("div",null,"The styling was added using the Material-UI library."))},fe=function(){var e=Object(m.c)((function(e){return e.blogs})),t=Object(m.c)((function(e){return e.user})),n=Object(m.c)((function(e){return e.users})),l=Object(m.b)();Object(r.useEffect)((function(){l(function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAll();case 2:n=e.sent,t({type:"INITIALIZATION",data:{blogs:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l(function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:{users:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[l]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);P.setToken(t.token),l(X(t))}}),[]);var u=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.login({username:t,password:n});case 3:return a=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),e.next=7,l(X(a));case 7:P.setToken(a.token),d("Logged in successfully",!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),d("Wrong username and/or password!",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f.current.toggleVisibility(),e.next=4,l(H(t));case 4:d('A new blog titled "'.concat(t.title,'" by ').concat(t.author," created successfully"),!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d("No new blog created!",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e,t){var n;l((n=[e,t],function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"NOTIFICATION",data:{msg:n}}),clearTimeout(a),a=setTimeout((function(){t({type:"NOTIFICATION",data:null})}),4e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},f=Object(r.useRef)(),v=Object(G.g)("/users/:id"),b=v?n.find((function(e){return e.id===v.params.id})):null,E=Object(G.g)("/blogs/:id"),g=E?e.find((function(e){return e.id===E.params.id})):null;return c.a.createElement(ee.a,null,c.a.createElement("div",null,c.a.createElement(T,null),t?c.a.createElement("div",null,c.a.createElement(te.a,{position:"sticky",style:{background:"#8bc34a",marginBottom:25}},c.a.createElement(ne.a,null,c.a.createElement(ae.a,{container:!0,justify:"space-between"},c.a.createElement(ae.a,{item:!0},c.a.createElement(p.a,{color:"inherit",component:j.b,to:"/"},"Home"),c.a.createElement(p.a,{color:"inherit",component:j.b,to:"/blogs"},"Blogs"),c.a.createElement(p.a,{color:"inherit",component:j.b,to:"/users"},"Users")),c.a.createElement(ae.a,{item:!0},c.a.createElement(re.a,{display:"inline",style:{marginRight:16}},c.a.createElement("b",null,t.name)," logged in."),c.a.createElement(p.a,{color:"secondary",variant:"contained",onClick:function(e){e.preventDefault();try{window.localStorage.clear(),l(X(null)),d("Logged out successfully",!0)}catch(t){console.log(t)}}},"Log out"))))),c.a.createElement(G.c,null,c.a.createElement(G.a,{exact:!0,path:"/users"},c.a.createElement(D,{users:n})),c.a.createElement(G.a,{path:"/users/:id"},c.a.createElement(ue,{user:b})),c.a.createElement(G.a,{exact:!0,path:"/blogs"},c.a.createElement(k,{blogs:e,blogFormRef:f,handleBlogAddition:o})),c.a.createElement(G.a,{path:"/blogs/:id"},c.a.createElement(W,{user:t,blog:g,handleNotice:d})),c.a.createElement(G.a,{path:"/"},c.a.createElement(de,null)))):c.a.createElement(A,{handleLogin:u})))},pe=(n(121),n(39)),ve=n(83),be=Object(pe.c)({notification:Q,blogs:Z,user:$,users:ie}),Ee=Object(pe.d)(be,Object(pe.a)(ve.a));u.a.render(c.a.createElement(j.a,null,c.a.createElement(m.a,{store:Ee},c.a.createElement(fe,null))),document.getElementById("root"))},91:function(e,t,n){e.exports=n(122)}},[[91,1,2]]]);
//# sourceMappingURL=main.23a16c34.chunk.js.map